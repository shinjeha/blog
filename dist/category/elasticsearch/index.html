<!DOCTYPE html>
<html data-html-server-rendered="true" lang="fr" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22fr%22%7D%7D">
  <head>
    <title>블로그 - 블로그</title><meta name="gridsome:hash" content="ccc1fdb6f2e137c3d58940c987b6e7692227e094"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" httpEquiv="X-UA-Compatible" content="IE=edge"><meta data-vue-tag="ssr" name="HandheldFriendly" content="true"><meta data-vue-tag="ssr" name="theme-color" content="#333"><meta data-vue-tag="ssr" name="msapplication-navbutton-color" content="#333"><meta data-vue-tag="ssr" name="apple-mobile-web-app-capable" content="yes"><meta data-vue-tag="ssr" name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta data-vue-tag="ssr" data-key="description" name="description" content="이것저것 기록"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic"><link rel="preload" href="/assets/css/0.styles.bcd5a06c.css" as="style"><link rel="preload" href="/assets/js/app.fef51f8e.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--category-vue.f3007ae4.js" as="script"><link rel="prefetch" href="/assets/js/11.7a8d85ba.js"><link rel="prefetch" href="/assets/js/page--src--pages--404-vue.19c1e140.js"><link rel="prefetch" href="/assets/js/page--src--pages--archives-vue.432714be.js"><link rel="prefetch" href="/assets/js/page--src--pages--categories-vue.c16cb2b4.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.f7c37519.js"><link rel="prefetch" href="/assets/js/page--src--pages--tags-vue.4bab50ac.js"><link rel="prefetch" href="/assets/js/page--src--templates--blog-page-vue.97a63898.js"><link rel="prefetch" href="/assets/js/page--src--templates--post-vue.2f68a494.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.30844eb4.js"><link rel="stylesheet" href="/assets/css/0.styles.bcd5a06c.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app"><aside><div><div style="display:contents;"><h1><a href="/">블로그</a></h1><p>이것저것 기록</p><hr><ul class="list"><li><a href="/category/elasticsearch/" aria-current="page" class="active--exact active">elasticsearch </a> (5)
    </li><li><a href="/category/git/">git </a> (1)
    </li><li><a href="/category/javascript/">javascript </a> (1)
    </li><li><a href="/category/linux/">linux </a> (1)
    </li><li><a href="/category/npm/">npm </a> (1)
    </li><li><a href="/category/tomcat/">tomcat </a> (1)
    </li><li><a href="/category/vim/">vim </a> (1)
    </li></ul></div><nav><ul class="list"><li><a href="/pages/about/">About me</a></li><li><a href="//github.com/phoenix741/gridsome-flex-markdown-starter" target="_blank" rel="noopener">The theme</a></li></ul></nav><ul class="social"><li><a href="//github.com/phoenix741/" target="_blank" rel="noopener" class="sc-github"><i class="fa fa-github"></i></a></li><li><a href="/feed.atom" class="sc-rss"><i class="fa fa-rss"></i></a></li></ul></div></aside><main><nav><a href="/" class="active">Home</a><a href="/archives">Archives</a><a href="/categories">Categories</a><a href="/tags">Tags</a><a href="/feed.atom">ATOM</a></nav><h1 class="category-title text-center space-bottom">
    # elasticsearch
  </h1><div class="posts"><article><header><h2><a href="/post/2021-03-31-id-wildcard/">_id wildcard 검색</a></h2><p><span>31. March 2021 <a href="/category/elasticsearch/" aria-current="page" class="active--exact active">elasticsearch</a></span>
    •
    <span>Tags:
  </span></p><p><span>Temps de lecture: <strong>1 min</strong></span></p></header><div><h1>_id wildcard로 검색</h1>
<p>그냥 wildcard 쿼리로 검색하면 에러가 발생하므로 script를 이용한다.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"script"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"script"</span><span class="token operator">:</span> <span class="token string">"doc['_id'][0].indexOf('test_') > -1"</span>
	<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><br><a href="/post/2021-03-31-id-wildcard/" class="btn">Lire la suite ...</a><hr></article><article><header><h2><a href="/post/2020-07-02-accessdeniedexception/">AccessDeniedException error</a></h2><p><span>2. July 2020 <a href="/category/elasticsearch/" aria-current="page" class="active--exact active">elasticsearch</a></span>
    •
    <span>Tags:
  </span></p><p><span>Temps de lecture: <strong>1 min</strong></span></p></header><div><p>Elasticsearch 구동 시 에러가 발생했다.</p>
<pre class="language-console"><code class="language-console">Exception in thread "main" java.nio.file.AccessDeniedException: /tmp/elasticsearch-~~~
    at ...
    at ...
    at ...</code></pre>
<p>말 그대로 권한 문제.</p><p>크게 두가지 경우로 나뉘는거 같다.</p>
<h2>1. 파일 권한 문제</h2>
<pre class="language-console"><code class="language-console">Exception in thread "main" java.nio.file.AccessDeniedException: /home/elasticsearch/config/jvm.options
    at ...
    at ...
    at ...</code></pre>
<p>구체적인 파일명이 적혀 있으면 해당 파일의 권한이 Elasticsearch권한으로 되어있는지 살펴봐야 한다. ...</p></div><br><a href="/post/2020-07-02-accessdeniedexception/" class="btn">Lire la suite ...</a><hr></article><article><header><h2><a href="/post/2020-04-27-terms-aggs-script/">using regexp script in terms aggs</a></h2><p><span>27. April 2020 <a href="/category/elasticsearch/" aria-current="page" class="active--exact active">elasticsearch</a></span>
    •
    <span>Tags:
  </span></p><p><span>Temps de lecture: <strong>1 min</strong></span></p></header><div><p>데이터가 d_100, w_100 이런식으로 저장되어 있었는데,</p><p>d, w따로 나누어서 갯수를 집계해야 할 일이 생겼다.</p><p>어떻게 처리할까 생각하다가 정규식을 이용해서 분리했다.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"office"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"terms"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"office_field"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"danger"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"terms"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"script"</span><span class="token operator">:</span> <span class="token string">"String aaa = /_/.split(doc.value_list[0])[0]; if (aaa == 'd') {doc['grp_nm'].value}"</span><span class="token punctuation">,</span>
            <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">20</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">"warning"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"terms"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"script"</span><span class="token operator">:</span> <span class="token string">"String aaa = /_/.split(doc.value_list[0])[0]; if (aaa == 'w') {doc['grp_nm'].value}"</span><span class="token punctuation">,</span>
            <span class="token property">"size"</span><span class="token operator">:</span> <span class="token number">20</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div><br><a href="/post/2020-04-27-terms-aggs-script/" class="btn">Lire la suite ...</a><hr></article><article><header><h2><a href="/post/2020-04-27-trim-script/">trim script</a></h2><p><span>27. April 2020 <a href="/category/elasticsearch/" aria-current="page" class="active--exact active">elasticsearch</a></span>
    •
    <span>Tags:
  </span></p><p><span>Temps de lecture: <strong>1 min</strong></span></p></header><div><p>keyword필드의 앞, 뒤 공백을 잘라야 할 일이 생겨서 쿼리를 작성해보았다.</p>
<pre class="language-json"><code class="language-json">GET test_index/_update_by_query

<span class="token punctuation">{</span>
  <span class="token property">"script"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"inline"</span><span class="token operator">:</span> <span class="token string">"ctx._source.str_field = ctx._source.str_field.trim();"</span><span class="token punctuation">,</span>
    <span class="token property">"lang"</span><span class="token operator">:</span> <span class="token string">"painless"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token string">"  문 자  열  "</span>-> <span class="token string">"문 자  열"</span></code></pre></div><br><a href="/post/2020-04-27-trim-script/" class="btn">Lire la suite ...</a><hr></article><article><header><h2><a href="/post/2019-06-13-too-many-dynamic-script-compilations-within/">Too many dynamic script compilations within error</a></h2><p><span>13. June 2019 <a href="/category/elasticsearch/" aria-current="page" class="active--exact active">elasticsearch</a></span>
    •
    <span>Tags:
  </span></p><p><span>Temps de lecture: <strong>1 min</strong></span></p></header><div><h2>Too many dynamic script compilations within 에러</h2>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"error"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"root_cause"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"circuit_breaking_exception"</span><span class="token punctuation">,</span>
        <span class="token property">"reason"</span><span class="token operator">:</span> <span class="token string">"[script] Too many dynamic script compilations within, max: [75/5m]; please use indexed, or scripts with parameters instead; this limit can be changed by the [script.max_compilations_rate] setting"</span><span class="token punctuation">,</span>
        <span class="token property">"bytes_wanted"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">"bytes_limit"</span><span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
    ...
  <span class="token property">"status"</span><span class="token operator">:</span> <span class="token number">400</span>
<span class="token punctuation">}</span></code></pre>
<p>검색 결과 일정시간안에 너무 많은 스크립트가 발생해서 생기는 오류.</p><p>75/5m 으로 세팅되어 있는데 5분에 75개까지의 스크립트를 실행 할 수 있다는 의미.</p><p>공식문서를 찾아보니 스크립트를 사용할 떄 가급적 파라미터를 사용하기를 권장한다.</p>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting-using.html#prefer-params">https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting-using.html#prefer-params</a></li>
</ul>
<p>@TODO 스크립트 캐시 확인</p></div><br><a href="/post/2019-06-13-too-many-dynamic-script-compilations-within/" class="btn">Lire la suite ...</a><hr></article></div><footer><p>
        © Me
        2021-2021
      </p><p>
        Powered by <a href="https://gridsome.org/" target="_blank" rel="noopener">Gridsome</a> -
        <a href="https://github.com/phoenix741/gridsome-flex-markdown-starter" target="_blank" rel="noopener">Flex</a>
        theme by
        <a href="https://shadoware.org" target="_blank" rel="noopener">Ulrich Vandenhekke</a></p><p>
        Fork of
        <a href="https://github.com/alexandrevicenzi/flex" target="_blank" rel="noopener">Flex</a>
        theme by
        <a href="http://alexandrevicenzi.com" target="_blank" rel="noopener">Alexandre Vicenzi</a></p></footer></main></div>
    <script>window.__INITIAL_STATE__={"data":{"category":{"title":"elasticsearch","belongsTo":{"edges":[{"node":{"title":"_id wildcard 검색","path":"\u002Fpost\u002F2021-03-31-id-wildcard\u002F","date":"31. March 2021","timeToRead":1,"excerpt":"\u003Ch1\u003E_id wildcard로 검색\u003C\u002Fh1\u003E\n\u003Cp\u003E그냥 wildcard 쿼리로 검색하면 에러가 발생하므로 script를 이용한다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"query\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token property\"\u003E\"script\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token property\"\u003E\"script\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"doc['_id'][0].indexOf('test_') \u003E -1\"\u003C\u002Fspan\u003E\n\t\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E","category":{"id":"elasticsearch","title":"elasticsearch","path":"\u002Fcategory\u002Felasticsearch\u002F"},"tags":[]}},{"node":{"title":"AccessDeniedException error","path":"\u002Fpost\u002F2020-07-02-accessdeniedexception\u002F","date":"2. July 2020","timeToRead":1,"excerpt":"\u003Cp\u003EElasticsearch 구동 시 에러가 발생했다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-console\"\u003E\u003Ccode class=\"language-console\"\u003EException in thread \"main\" java.nio.file.AccessDeniedException: \u002Ftmp\u002Felasticsearch-~~~\n    at ...\n    at ...\n    at ...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E말 그대로 권한 문제.\u003C\u002Fp\u003E\u003Cp\u003E크게 두가지 경우로 나뉘는거 같다.\u003C\u002Fp\u003E\n\u003Ch2\u003E1. 파일 권한 문제\u003C\u002Fh2\u003E\n\u003Cpre class=\"language-console\"\u003E\u003Ccode class=\"language-console\"\u003EException in thread \"main\" java.nio.file.AccessDeniedException: \u002Fhome\u002Felasticsearch\u002Fconfig\u002Fjvm.options\n    at ...\n    at ...\n    at ...\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E구체적인 파일명이 적혀 있으면 해당 파일의 권한이 Elasticsearch권한으로 되어있는지 살펴봐야 한다. ...\u003C\u002Fp\u003E","category":{"id":"elasticsearch","title":"elasticsearch","path":"\u002Fcategory\u002Felasticsearch\u002F"},"tags":[]}},{"node":{"title":"using regexp script in terms aggs","path":"\u002Fpost\u002F2020-04-27-terms-aggs-script\u002F","date":"27. April 2020","timeToRead":1,"excerpt":"\u003Cp\u003E데이터가 d_100, w_100 이런식으로 저장되어 있었는데,\u003C\u002Fp\u003E\u003Cp\u003Ed, w따로 나누어서 갯수를 집계해야 할 일이 생겼다.\u003C\u002Fp\u003E\u003Cp\u003E어떻게 처리할까 생각하다가 정규식을 이용해서 분리했다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"size\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"aggs\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token property\"\u003E\"office\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token property\"\u003E\"terms\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token property\"\u003E\"field\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"office_field\"\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token property\"\u003E\"aggs\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token property\"\u003E\"danger\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token property\"\u003E\"terms\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token property\"\u003E\"script\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"String aaa = \u002F_\u002F.split(doc.value_list[0])[0]; if (aaa == 'd') {doc['grp_nm'].value}\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token property\"\u003E\"size\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E20\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token property\"\u003E\"aggs\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token property\"\u003E\"warning\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token property\"\u003E\"terms\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token property\"\u003E\"script\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"String aaa = \u002F_\u002F.split(doc.value_list[0])[0]; if (aaa == 'w') {doc['grp_nm'].value}\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n            \u003Cspan class=\"token property\"\u003E\"size\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E20\u003C\u002Fspan\u003E\n          \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E","category":{"id":"elasticsearch","title":"elasticsearch","path":"\u002Fcategory\u002Felasticsearch\u002F"},"tags":[]}},{"node":{"title":"trim script","path":"\u002Fpost\u002F2020-04-27-trim-script\u002F","date":"27. April 2020","timeToRead":1,"excerpt":"\u003Cp\u003Ekeyword필드의 앞, 뒤 공백을 잘라야 할 일이 생겨서 쿼리를 작성해보았다.\u003C\u002Fp\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003EGET test_index\u002F_update_by_query\n\n\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"script\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token property\"\u003E\"inline\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"ctx._source.str_field = ctx._source.str_field.trim();\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token property\"\u003E\"lang\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"painless\"\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token string\"\u003E\"  문 자  열  \"\u003C\u002Fspan\u003E-\u003E \u003Cspan class=\"token string\"\u003E\"문 자  열\"\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E","category":{"id":"elasticsearch","title":"elasticsearch","path":"\u002Fcategory\u002Felasticsearch\u002F"},"tags":[]}},{"node":{"title":"Too many dynamic script compilations within error","path":"\u002Fpost\u002F2019-06-13-too-many-dynamic-script-compilations-within\u002F","date":"13. June 2019","timeToRead":1,"excerpt":"\u003Ch2\u003EToo many dynamic script compilations within 에러\u003C\u002Fh2\u003E\n\u003Cpre class=\"language-json\"\u003E\u003Ccode class=\"language-json\"\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token property\"\u003E\"error\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token property\"\u003E\"root_cause\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token property\"\u003E\"type\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"circuit_breaking_exception\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token property\"\u003E\"reason\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"[script] Too many dynamic script compilations within, max: [75\u002F5m]; please use indexed, or scripts with parameters instead; this limit can be changed by the [script.max_compilations_rate] setting\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token property\"\u003E\"bytes_wanted\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n        \u003Cspan class=\"token property\"\u003E\"bytes_limit\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E\n    ...\n  \u003Cspan class=\"token property\"\u003E\"status\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E400\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E검색 결과 일정시간안에 너무 많은 스크립트가 발생해서 생기는 오류.\u003C\u002Fp\u003E\u003Cp\u003E75\u002F5m 으로 세팅되어 있는데 5분에 75개까지의 스크립트를 실행 할 수 있다는 의미.\u003C\u002Fp\u003E\u003Cp\u003E공식문서를 찾아보니 스크립트를 사용할 떄 가급적 파라미터를 사용하기를 권장한다.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"https:\u002F\u002Fwww.elastic.co\u002Fguide\u002Fen\u002Felasticsearch\u002Freference\u002Fcurrent\u002Fmodules-scripting-using.html#prefer-params\"\u003Ehttps:\u002F\u002Fwww.elastic.co\u002Fguide\u002Fen\u002Felasticsearch\u002Freference\u002Fcurrent\u002Fmodules-scripting-using.html#prefer-params\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003E@TODO 스크립트 캐시 확인\u003C\u002Fp\u003E","category":{"id":"elasticsearch","title":"elasticsearch","path":"\u002Fcategory\u002Felasticsearch\u002F"},"tags":[]}}]}}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.fef51f8e.js" defer></script><script src="/assets/js/page--src--templates--category-vue.f3007ae4.js" defer></script>
  </body>
</html>
