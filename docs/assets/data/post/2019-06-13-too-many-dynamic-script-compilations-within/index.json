{"hash":"ccc1fdb6f2e137c3d58940c987b6e7692227e094","data":{"post":{"title":"Too many dynamic script compilations within error","path":"/post/2019-06-13-too-many-dynamic-script-compilations-within/","date":"13. June 2019","timeToRead":1,"category":{"id":"elasticsearch","title":"elasticsearch","path":"/category/elasticsearch/"},"tags":[],"content":"<h2 id=\"too-many-dynamic-script-compilations-within-에러\"><a href=\"#too-many-dynamic-script-compilations-within-%EC%97%90%EB%9F%AC\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Too many dynamic script compilations within 에러</h2>\n<pre class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"error\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"root_cause\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"type\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"circuit_breaking_exception\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"reason\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"[script] Too many dynamic script compilations within, max: [75/5m]; please use indexed, or scripts with parameters instead; this limit can be changed by the [script.max_compilations_rate] setting\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"bytes_wanted\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"bytes_limit\"</span><span class=\"token operator\">:</span> <span class=\"token number\">0</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">]</span>\n    ...\n  <span class=\"token property\">\"status\"</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span>\n<span class=\"token punctuation\">}</span><span class=\"line-numbers-rows\" aria-hidden=\"true\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>검색 결과 일정시간안에 너무 많은 스크립트가 발생해서 생기는 오류.</p>\n<p>75/5m 으로 세팅되어 있는데 5분에 75개까지의 스크립트를 실행 할 수 있다는 의미.</p>\n<p>공식문서를 찾아보니 스크립트를 사용할 떄 가급적 파라미터를 사용하기를 권장한다.</p>\n<ul>\n<li><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting-using.html#prefer-params\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting-using.html#prefer-params</a></li>\n</ul>\n<p>@TODO 스크립트 캐시 확인</p>\n"},"metadata":{"siteUrl":"http://localhost:8080","utterances":{"repo":"phoenix741/comments.myblog","issueTerm":"title","label":"discussion"}}},"context":{}}